{"ast":null,"code":"import { MongoClient } from \"mongodb\";\nimport dbConfig from \"../../util/dbConfig\"; //TODO: vezi de ce se tot conecteaza dijaba la server\n\nexport default ((req, res) => {\n  console.log(\"is this called though?\");\n  MongoClient.connect(dbConfig.dbURI, (error, client) => {\n    if (error) throw error;\n\n    try {\n      const db = client.db(dbConfig.dbName);\n      console.log(\"connected to the server!\");\n      db.collection(\"quotes\").findOne({\n        author: \"MWR\"\n      }).then(res.status(200).json).then(() => console.log(\"why am I called again????\")).catch(console.error);\n      client.close().then(() => console.log(\"connection closed.\")).catch(console.error);\n    } catch (err) {\n      return console.error(err);\n    }\n  });\n});","map":{"version":3,"sources":["C:/Users/Tudor/Desktop/Proiecte Web/infoplus/pages/api/db.js"],"names":["MongoClient","dbConfig","req","res","console","log","connect","dbURI","error","client","db","dbName","collection","findOne","author","then","status","json","catch","close","err"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AACA,OAAOC,QAAP,MAAqB,qBAArB,C,CACA;;AACA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3BC,EAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAL,EAAAA,WAAW,CAACM,OAAZ,CAAoBL,QAAQ,CAACM,KAA7B,EAAoC,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACrD,QAAID,KAAJ,EAAW,MAAMA,KAAN;;AACX,QAAI;AACF,YAAME,EAAE,GAAGD,MAAM,CAACC,EAAP,CAAUT,QAAQ,CAACU,MAAnB,CAAX;AACAP,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAK,MAAAA,EAAE,CAACE,UAAH,CAAc,QAAd,EACGC,OADH,CACW;AAAEC,QAAAA,MAAM,EAAE;AAAV,OADX,EAEGC,IAFH,CAEQZ,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAFxB,EAGGF,IAHH,CAGQ,MAAMX,OAAO,CAACC,GAAR,CAAY,2BAAZ,CAHd,EAIGa,KAJH,CAISd,OAAO,CAACI,KAJjB;AAMAC,MAAAA,MAAM,CACHU,KADH,GAEGJ,IAFH,CAEQ,MAAMX,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAFd,EAGGa,KAHH,CAGSd,OAAO,CAACI,KAHjB;AAID,KAbD,CAaE,OAAOY,GAAP,EAAY;AACZ,aAAOhB,OAAO,CAACI,KAAR,CAAcY,GAAd,CAAP;AACD;AACF,GAlBD;AAmBD,CArBD","sourcesContent":["import { MongoClient } from \"mongodb\";\r\nimport dbConfig from \"../../util/dbConfig\";\r\n//TODO: vezi de ce se tot conecteaza dijaba la server\r\nexport default (req, res) => {\r\n  console.log(\"is this called though?\");\r\n  MongoClient.connect(dbConfig.dbURI, (error, client) => {\r\n    if (error) throw error;\r\n    try {\r\n      const db = client.db(dbConfig.dbName);\r\n      console.log(\"connected to the server!\");\r\n      db.collection(\"quotes\")\r\n        .findOne({ author: \"MWR\" })\r\n        .then(res.status(200).json)\r\n        .then(() => console.log(\"why am I called again????\"))\r\n        .catch(console.error);\r\n\r\n      client\r\n        .close()\r\n        .then(() => console.log(\"connection closed.\"))\r\n        .catch(console.error);\r\n    } catch (err) {\r\n      return console.error(err);\r\n    }\r\n  });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}