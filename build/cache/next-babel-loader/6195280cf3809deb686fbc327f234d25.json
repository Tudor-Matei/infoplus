{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\plesa\\\\Desktop\\\\Proiecte Web\\\\infoplus\\\\components\\\\utils\\\\SubmitButton.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useContext } from \"react\";\nimport { ShowAlertContext } from \"../../pages/_app\";\nimport { RegisterModalHandler } from \"../Home/Main\";\nimport { LoginModalHandler } from \"../Home/Main\";\nimport checkFieldsValidity from \"../../utils/checkFieldsValidity\";\nexport default function SubmitButton(_ref) {\n  var userData = _ref.userData,\n      showErrorMessage = _ref.showErrorMessage,\n      buttonTitle = _ref.buttonTitle,\n      type = _ref.type;\n\n  var _useState = useState(false),\n      isDisabled = _useState[0],\n      setDisabled = _useState[1];\n\n  var showModalHandler = useContext(type === \"register\" ? RegisterModalHandler : LoginModalHandler);\n  var modifyAlert = useContext(ShowAlertContext);\n  return __jsx(React.Fragment, null, __jsx(\"button\", {\n    type: \"submit\",\n    disabled: isDisabled,\n    onClick: function onClick(e) {\n      return submitHandler({\n        e: e,\n        userData: userData,\n        showErrorMessage: showErrorMessage,\n        setDisabled: setDisabled,\n        modalHandler: showModalHandler,\n        modifyAlert: modifyAlert,\n        fetchEndpoint: \"api/\".concat(type)\n      });\n    },\n    className: \"jsx-3491458380\" + \" \" + \"button--primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 13\n    }\n  }, buttonTitle), __jsx(_JSXStyle, {\n    id: \"3491458380\",\n    __self: this\n  }, \".button--primary.jsx-3491458380{background-color:var(--accent-secondary);}.modal--login .button-primary{background-color:var(--accent-primary);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGxlc2FcXERlc2t0b3BcXFByb2llY3RlIFdlYlxcaW5mb3BsdXNcXGNvbXBvbmVudHNcXHV0aWxzXFxTdWJtaXRCdXR0b24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0N3QixBQUc4RCxBQUlGLHVDQUMzQyxFQUpBIiwiZmlsZSI6IkM6XFxVc2Vyc1xccGxlc2FcXERlc2t0b3BcXFByb2llY3RlIFdlYlxcaW5mb3BsdXNcXGNvbXBvbmVudHNcXHV0aWxzXFxTdWJtaXRCdXR0b24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBTaG93QWxlcnRDb250ZXh0IH0gZnJvbSBcIi4uLy4uL3BhZ2VzL19hcHBcIjtcclxuaW1wb3J0IHsgUmVnaXN0ZXJNb2RhbEhhbmRsZXIgfSBmcm9tIFwiLi4vSG9tZS9NYWluXCI7XHJcbmltcG9ydCB7IExvZ2luTW9kYWxIYW5kbGVyIH0gZnJvbSBcIi4uL0hvbWUvTWFpblwiO1xyXG5pbXBvcnQgY2hlY2tGaWVsZHNWYWxpZGl0eSBmcm9tIFwiLi4vLi4vdXRpbHMvY2hlY2tGaWVsZHNWYWxpZGl0eVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3VibWl0QnV0dG9uKHsgdXNlckRhdGEsIHNob3dFcnJvck1lc3NhZ2UsIGJ1dHRvblRpdGxlLCB0eXBlIH0pIHtcclxuICAgIGNvbnN0IFtpc0Rpc2FibGVkLCBzZXREaXNhYmxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gICAgY29uc3Qgc2hvd01vZGFsSGFuZGxlciA9IHVzZUNvbnRleHQoXHJcbiAgICAgICAgdHlwZSA9PT0gXCJyZWdpc3RlclwiID8gUmVnaXN0ZXJNb2RhbEhhbmRsZXIgOiBMb2dpbk1vZGFsSGFuZGxlclxyXG4gICAgKTtcclxuICAgIGNvbnN0IG1vZGlmeUFsZXJ0ID0gdXNlQ29udGV4dChTaG93QWxlcnRDb250ZXh0KTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDw+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzRGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT5cclxuICAgICAgICAgICAgICAgICAgICBzdWJtaXRIYW5kbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFcnJvck1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldERpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbEhhbmRsZXI6IHNob3dNb2RhbEhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmeUFsZXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaEVuZHBvaW50OiBgYXBpLyR7dHlwZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24tLXByaW1hcnlcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7YnV0dG9uVGl0bGV9XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgICAgICAuYnV0dG9uLS1wcmltYXJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQtc2Vjb25kYXJ5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICA6Z2xvYmFsKC5tb2RhbC0tbG9naW4gLmJ1dHRvbi1wcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50LXByaW1hcnkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgPC8+XHJcbiAgICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRIYW5kbGVyKHtcclxuICAgIGUsXHJcbiAgICB1c2VyRGF0YSxcclxuICAgIHNob3dFcnJvck1lc3NhZ2UsXHJcbiAgICBzZXREaXNhYmxlZCxcclxuICAgIG1vZGFsSGFuZGxlcixcclxuICAgIG1vZGlmeUFsZXJ0LFxyXG4gICAgZmV0Y2hFbmRwb2ludCxcclxufSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgc2V0RGlzYWJsZWQodHJ1ZSk7XHJcblxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gY2hlY2tGaWVsZHNWYWxpZGl0eSh7XHJcbiAgICAgICAgZmllbGRzOiB1c2VyRGF0YSxcclxuICAgICAgICBtaW5pbXVtTGVuZ3RoRm9yRWFjaEZpZWxkOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IDMsXHJcbiAgICAgICAgICAgIHN1cm5hbWU6IDMsXHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiA1LFxyXG4gICAgICAgICAgICBwYXNzd29yZDogOCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhc0VtYWlsOiB0cnVlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9yTWVzc2FnZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICBzZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuIHNob3dFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBmZXRjaChmZXRjaEVuZHBvaW50LCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSksXHJcbiAgICB9KVxyXG4gICAgICAgIC50aGVuKChyKSA9PiByLmpzb24oKSlcclxuICAgICAgICAudGhlbigoeyBvaywgZXJyb3IgPSBudWxsIH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFvaylcclxuICAgICAgICAgICAgICAgIG1vZGlmeUFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46ICFlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIkEgYXDEg3J1dCBvIGVyb2FyZSBpbnRlcm7EgywgdsSDIHJ1Z2FtIHPEgyBuZSBzY3V6YcibaS5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBlcnJvcixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG1vZGlmeUFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiT3BlcmHIm2l1bmVhIGEgZm9zdCBlZmVjdHVhdMSDIGN1IHN1Y2Nlcy5cIixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBtb2RhbEhhbmRsZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIHNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgc2hvd0Vycm9yTWVzc2FnZShcIkEgYXBhcnV0IG8gZXJvYXJlIGludGVybmEsIHZhIHJvZyBzYSBuZSBzY3V6YXRpLlwiKTtcclxuICAgICAgICB9KTtcclxufVxyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\plesa\\\\\\\\Desktop\\\\\\\\Proiecte Web\\\\\\\\infoplus\\\\\\\\components\\\\\\\\utils\\\\\\\\SubmitButton.js */\"));\n}\n\nfunction submitHandler(_ref2) {\n  var e = _ref2.e,\n      userData = _ref2.userData,\n      showErrorMessage = _ref2.showErrorMessage,\n      setDisabled = _ref2.setDisabled,\n      modalHandler = _ref2.modalHandler,\n      modifyAlert = _ref2.modifyAlert,\n      fetchEndpoint = _ref2.fetchEndpoint;\n  e.preventDefault();\n  setDisabled(true);\n  var errorMessage = checkFieldsValidity({\n    fields: userData,\n    minimumLengthForEachField: {\n      name: 3,\n      surname: 3,\n      username: 5,\n      password: 8\n    },\n    hasEmail: true\n  });\n\n  if (errorMessage !== false) {\n    setDisabled(false);\n    return showErrorMessage(errorMessage);\n  }\n\n  fetch(fetchEndpoint, {\n    method: \"POST\",\n    body: JSON.stringify(userData)\n  }).then(function (r) {\n    return r.json();\n  }).then(function (_ref3) {\n    var ok = _ref3.ok,\n        _ref3$error = _ref3.error,\n        error = _ref3$error === void 0 ? null : _ref3$error;\n    if (!ok) modifyAlert({\n      isVisible: true,\n      props: {\n        type: 0,\n        children: !error ? \"A apărut o eroare internă, vă rugam să ne scuzați.\" : error\n      }\n    });else modifyAlert({\n      isVisible: true,\n      props: {\n        type: 1,\n        children: \"Operațiunea a fost efectuată cu succes.\"\n      }\n    });\n    modalHandler();\n  })[\"catch\"](function (error) {\n    console.error(error);\n    setDisabled(false);\n    showErrorMessage(\"A aparut o eroare interna, va rog sa ne scuzati.\");\n  });\n}","map":{"version":3,"sources":["C:/Users/plesa/Desktop/Proiecte Web/infoplus/components/utils/SubmitButton.js"],"names":["useState","useContext","ShowAlertContext","RegisterModalHandler","LoginModalHandler","checkFieldsValidity","SubmitButton","userData","showErrorMessage","buttonTitle","type","isDisabled","setDisabled","showModalHandler","modifyAlert","e","submitHandler","modalHandler","fetchEndpoint","preventDefault","errorMessage","fields","minimumLengthForEachField","name","surname","username","password","hasEmail","fetch","method","body","JSON","stringify","then","r","json","ok","error","isVisible","props","children","console"],"mappings":"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","sourcesContent":["import { useState, useContext } from \"react\";\r\nimport { ShowAlertContext } from \"../../pages/_app\";\r\nimport { RegisterModalHandler } from \"../Home/Main\";\r\nimport { LoginModalHandler } from \"../Home/Main\";\r\nimport checkFieldsValidity from \"../../utils/checkFieldsValidity\";\r\n\r\nexport default function SubmitButton({ userData, showErrorMessage, buttonTitle, type }) {\r\n    const [isDisabled, setDisabled] = useState(false);\r\n\r\n    const showModalHandler = useContext(\r\n        type === \"register\" ? RegisterModalHandler : LoginModalHandler\r\n    );\r\n    const modifyAlert = useContext(ShowAlertContext);\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                type=\"submit\"\r\n                disabled={isDisabled}\r\n                onClick={(e) =>\r\n                    submitHandler({\r\n                        e,\r\n                        userData,\r\n                        showErrorMessage,\r\n                        setDisabled,\r\n                        modalHandler: showModalHandler,\r\n                        modifyAlert,\r\n                        fetchEndpoint: `api/${type}`,\r\n                    })\r\n                }\r\n                className=\"button--primary\"\r\n            >\r\n                {buttonTitle}\r\n            </button>\r\n            <style jsx>{`\r\n                .button--primary {\r\n                    background-color: var(--accent-secondary);\r\n                }\r\n\r\n                :global(.modal--login .button-primary) {\r\n                    background-color: var(--accent-primary);\r\n                }\r\n            `}</style>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction submitHandler({\r\n    e,\r\n    userData,\r\n    showErrorMessage,\r\n    setDisabled,\r\n    modalHandler,\r\n    modifyAlert,\r\n    fetchEndpoint,\r\n}) {\r\n    e.preventDefault();\r\n    setDisabled(true);\r\n\r\n    const errorMessage = checkFieldsValidity({\r\n        fields: userData,\r\n        minimumLengthForEachField: {\r\n            name: 3,\r\n            surname: 3,\r\n            username: 5,\r\n            password: 8,\r\n        },\r\n        hasEmail: true,\r\n    });\r\n\r\n    if (errorMessage !== false) {\r\n        setDisabled(false);\r\n        return showErrorMessage(errorMessage);\r\n    }\r\n\r\n    fetch(fetchEndpoint, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(userData),\r\n    })\r\n        .then((r) => r.json())\r\n        .then(({ ok, error = null }) => {\r\n            if (!ok)\r\n                modifyAlert({\r\n                    isVisible: true,\r\n                    props: {\r\n                        type: 0,\r\n                        children: !error\r\n                            ? \"A apărut o eroare internă, vă rugam să ne scuzați.\"\r\n                            : error,\r\n                    },\r\n                });\r\n            else\r\n                modifyAlert({\r\n                    isVisible: true,\r\n                    props: {\r\n                        type: 1,\r\n                        children: \"Operațiunea a fost efectuată cu succes.\",\r\n                    },\r\n                });\r\n\r\n            modalHandler();\r\n        })\r\n        .catch((error) => {\r\n            console.error(error);\r\n            setDisabled(false);\r\n            showErrorMessage(\"A aparut o eroare interna, va rog sa ne scuzati.\");\r\n        });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}