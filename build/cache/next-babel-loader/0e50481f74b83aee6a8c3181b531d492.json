{"ast":null,"code":"import connectToDatabase from \"../../utils/connectToDatabase\";\nexport default (async (req, res) => {\n  connectToDatabase().then((db, closeConnection) => {\n    const users = db.collection(\"users\");\n    users.insertOne(JSON.parse(req.body), (error, result) => {\n      if (error) {\n        console.error(error);\n        return res.status(500).json({\n          ok: false\n        });\n      }\n    });\n    return closeConnection();\n  }).catch(error => {\n    console.error(error);\n    res.status(500).json({\n      ok: false\n    });\n  });\n  res.status(200).json({\n    ok: true\n  });\n});","map":{"version":3,"sources":["C:/Users/plesa/Desktop/Proiecte Web/infoplus/pages/api/register.js"],"names":["connectToDatabase","req","res","then","db","closeConnection","users","collection","insertOne","JSON","parse","body","error","result","console","status","json","ok","catch"],"mappings":"AAAA,OAAOA,iBAAP,MAA8B,+BAA9B;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/BF,EAAAA,iBAAiB,GACZG,IADL,CACU,CAACC,EAAD,EAAKC,eAAL,KAAyB;AAC3B,UAAMC,KAAK,GAAGF,EAAE,CAACG,UAAH,CAAc,OAAd,CAAd;AACAD,IAAAA,KAAK,CAACE,SAAN,CAAgBC,IAAI,CAACC,KAAL,CAAWT,GAAG,CAACU,IAAf,CAAhB,EAAsC,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACrD,UAAID,KAAJ,EAAW;AACPE,QAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACA,eAAOV,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAArB,CAAP;AACH;AACJ,KALD;AAOA,WAAOZ,eAAe,EAAtB;AACH,GAXL,EAYKa,KAZL,CAYYN,KAAD,IAAW;AACdE,IAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACAV,IAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,EAAE,EAAE;AAAN,KAArB;AACH,GAfL;AAiBAf,EAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,EAAE,EAAE;AAAN,GAArB;AACH,CAnBD","sourcesContent":["import connectToDatabase from \"../../utils/connectToDatabase\";\r\n\r\nexport default async (req, res) => {\r\n    connectToDatabase()\r\n        .then((db, closeConnection) => {\r\n            const users = db.collection(\"users\");\r\n            users.insertOne(JSON.parse(req.body), (error, result) => {\r\n                if (error) {\r\n                    console.error(error);\r\n                    return res.status(500).json({ ok: false });\r\n                }\r\n            });\r\n\r\n            return closeConnection();\r\n        })\r\n        .catch((error) => {\r\n            console.error(error);\r\n            res.status(500).json({ ok: false });\r\n        });\r\n\r\n    res.status(200).json({ ok: true });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}