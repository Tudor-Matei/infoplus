{"ast":null,"code":"import connectToDatabase from \"../../utils/connectToDatabase\";\nimport MongoClient from \"mongodb\";\nimport dbConfig from \"../../configs/db\";\nexport default (async (req, res) => {\n  MongoClient.connect(dbConfig.dbURI, {\n    useUnifiedTopology: true\n  }, (error, client) => {\n    if (error) {\n      console.error(error);\n      return client.close();\n    }\n\n    const db = client.db(dbConfig.dbName);\n    const users = db.collection(\"users\");\n    users.insertOne(JSON.parse(req.body), (error, result) => {\n      if (error) {\n        console.error(error);\n        /*status(500)*/\n\n        return res.json({\n          ok: false\n        });\n      }\n\n      res.status(200).json({\n        ok: true\n      });\n    });\n    client.close();\n  }); // connectToDatabase((db) => {\n  //     const users = db.collection(\"users\");\n  //     users.insertOne(JSON.parse(req.body), (error, result) => {\n  //         if (error) {\n  //             console.error(error);\n  //             /*status(500)*/\n  //             return res.json({ ok: false });\n  //         }\n  //         res.status(200).json({ ok: true });\n  //     });\n  // });\n});","map":{"version":3,"sources":["C:/Users/plesa/Desktop/Proiecte Web/infoplus/pages/api/register.js"],"names":["connectToDatabase","MongoClient","dbConfig","req","res","connect","dbURI","useUnifiedTopology","error","client","console","close","db","dbName","users","collection","insertOne","JSON","parse","body","result","json","ok","status"],"mappings":"AAAA,OAAOA,iBAAP,MAA8B,+BAA9B;AACA,OAAOC,WAAP,MAAwB,SAAxB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/BH,EAAAA,WAAW,CAACI,OAAZ,CACIH,QAAQ,CAACI,KADb,EAEI;AAAEC,IAAAA,kBAAkB,EAAE;AAAtB,GAFJ,EAGI,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACf,QAAID,KAAJ,EAAW;AACPE,MAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACA,aAAOC,MAAM,CAACE,KAAP,EAAP;AACH;;AACD,UAAMC,EAAE,GAAGH,MAAM,CAACG,EAAP,CAAUV,QAAQ,CAACW,MAAnB,CAAX;AACA,UAAMC,KAAK,GAAGF,EAAE,CAACG,UAAH,CAAc,OAAd,CAAd;AAEAD,IAAAA,KAAK,CAACE,SAAN,CAAgBC,IAAI,CAACC,KAAL,CAAWf,GAAG,CAACgB,IAAf,CAAhB,EAAsC,CAACX,KAAD,EAAQY,MAAR,KAAmB;AACrD,UAAIZ,KAAJ,EAAW;AACPE,QAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACA;;AACA,eAAOJ,GAAG,CAACiB,IAAJ,CAAS;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAT,CAAP;AACH;;AAEDlB,MAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB;AAAEC,QAAAA,EAAE,EAAE;AAAN,OAArB;AACH,KARD;AASAb,IAAAA,MAAM,CAACE,KAAP;AACH,GArBL,EAD+B,CAwB/B;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACH,CArCD","sourcesContent":["import connectToDatabase from \"../../utils/connectToDatabase\";\r\nimport MongoClient from \"mongodb\";\r\nimport dbConfig from \"../../configs/db\";\r\n\r\nexport default async (req, res) => {\r\n    MongoClient.connect(\r\n        dbConfig.dbURI,\r\n        { useUnifiedTopology: true },\r\n        (error, client) => {\r\n            if (error) {\r\n                console.error(error);\r\n                return client.close();\r\n            }\r\n            const db = client.db(dbConfig.dbName);\r\n            const users = db.collection(\"users\");\r\n\r\n            users.insertOne(JSON.parse(req.body), (error, result) => {\r\n                if (error) {\r\n                    console.error(error);\r\n                    /*status(500)*/\r\n                    return res.json({ ok: false });\r\n                }\r\n\r\n                res.status(200).json({ ok: true });\r\n            });\r\n            client.close();\r\n        }\r\n    );\r\n    // connectToDatabase((db) => {\r\n    //     const users = db.collection(\"users\");\r\n\r\n    //     users.insertOne(JSON.parse(req.body), (error, result) => {\r\n    //         if (error) {\r\n    //             console.error(error);\r\n    //             /*status(500)*/\r\n    //             return res.json({ ok: false });\r\n    //         }\r\n\r\n    //         res.status(200).json({ ok: true });\r\n    //     });\r\n    // });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}