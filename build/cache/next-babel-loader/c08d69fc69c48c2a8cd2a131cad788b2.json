{"ast":null,"code":"import connectToDatabaseThen from \"../../utils/connectToDatabase\";\nimport checkFieldsValidity from \"../../utils/checkFieldsValidity\";\nexport default (async (req, res) => {\n  await connectToDatabaseThen(db => {\n    const users = db.collection(\"users\");\n    users.insertOne(JSON.parse(req.body), (error, _result) => {\n      if (error) {\n        console.error(error);\n        return res.status(500).json({\n          ok: false\n        });\n      }\n    });\n  });\n  res.status(200).json({\n    ok: true\n  });\n});","map":{"version":3,"sources":["C:/Users/plesa/Desktop/Proiecte Web/infoplus/pages/api/register.js"],"names":["connectToDatabaseThen","checkFieldsValidity","req","res","db","users","collection","insertOne","JSON","parse","body","error","_result","console","status","json","ok"],"mappings":"AAAA,OAAOA,qBAAP,MAAkC,+BAAlC;AACA,OAAOC,mBAAP,MAAgC,iCAAhC;AACA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMH,qBAAqB,CAAEI,EAAD,IAAQ;AAChC,UAAMC,KAAK,GAAGD,EAAE,CAACE,UAAH,CAAc,OAAd,CAAd;AAEAD,IAAAA,KAAK,CAACE,SAAN,CAAgBC,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACQ,IAAf,CAAhB,EAAsC,CAACC,KAAD,EAAQC,OAAR,KAAoB;AACtD,UAAID,KAAJ,EAAW;AACPE,QAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACA,eAAOR,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAArB,CAAP;AACH;AACJ,KALD;AAMH,GAT0B,CAA3B;AAWAb,EAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,EAAE,EAAE;AAAN,GAArB;AACH,CAbD","sourcesContent":["import connectToDatabaseThen from \"../../utils/connectToDatabase\";\r\nimport checkFieldsValidity from \"../../utils/checkFieldsValidity\";\r\nexport default async (req, res) => {\r\n    await connectToDatabaseThen((db) => {\r\n        const users = db.collection(\"users\");\r\n\r\n        users.insertOne(JSON.parse(req.body), (error, _result) => {\r\n            if (error) {\r\n                console.error(error);\r\n                return res.status(500).json({ ok: false });\r\n            }\r\n        });\r\n    });\r\n\r\n    res.status(200).json({ ok: true });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}