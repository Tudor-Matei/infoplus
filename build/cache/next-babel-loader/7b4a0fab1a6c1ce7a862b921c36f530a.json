{"ast":null,"code":"import checkFieldsValidity from \"../../utils/checkFieldsValidity\";\nexport default function submitHandler(_ref) {\n  var e = _ref.e,\n      userDetails = _ref.userDetails,\n      showErrorMessage = _ref.showErrorMessage,\n      setDisabled = _ref.setDisabled,\n      showModalHandler = _ref.showModalHandler,\n      modifyAlert = _ref.modifyAlert,\n      fetchEndpoint = _ref.fetchEndpoint;\n  e.preventDefault();\n  setDisabled(true);\n  var errorMessage = checkFieldsValidity({\n    fields: userDetails,\n    minimumLengthForEachField: {\n      name: 3,\n      surname: 3,\n      username: 5,\n      password: 8\n    },\n    hasEmail: true\n  });\n\n  if (errorMessage !== false) {\n    setDisabled(false);\n    return showErrorMessage(errorMessage);\n  }\n\n  fetch(fetchEndpoint, {\n    method: \"POST\",\n    body: JSON.stringify(userDetails)\n  }).then(function (r) {\n    return r.json();\n  }).then(function (_ref2) {\n    var ok = _ref2.ok,\n        _ref2$error = _ref2.error,\n        error = _ref2$error === void 0 ? null : _ref2$error;\n    if (!ok) modifyAlert({\n      isVisible: true,\n      props: {\n        type: 0,\n        children: !error ? \"A apărut o eroare internă, vă rugam să ne scuzați.\" : error\n      }\n    });else modifyAlert({\n      isVisible: true,\n      props: {\n        type: 1,\n        children: \"Operațiunea a fost efectuată cu succes.\"\n      }\n    });\n    showModalHandler();\n  })[\"catch\"](function (error) {\n    console.error(error);\n    setDisabled(false);\n    showErrorMessage(\"A aparut o eroare interna, va rog sa ne scuzati.\");\n  });\n}","map":{"version":3,"sources":["C:/Users/plesa/Desktop/Proiecte Web/infoplus/components/utils/submitHandler.js"],"names":["checkFieldsValidity","submitHandler","e","userDetails","showErrorMessage","setDisabled","showModalHandler","modifyAlert","fetchEndpoint","preventDefault","errorMessage","fields","minimumLengthForEachField","name","surname","username","password","hasEmail","fetch","method","body","JSON","stringify","then","r","json","ok","error","isVisible","props","type","children","console"],"mappings":"AAAA,OAAOA,mBAAP,MAAgC,iCAAhC;AACA,eAAe,SAASC,aAAT,OAQZ;AAAA,MAPCC,CAOD,QAPCA,CAOD;AAAA,MANCC,WAMD,QANCA,WAMD;AAAA,MALCC,gBAKD,QALCA,gBAKD;AAAA,MAJCC,WAID,QAJCA,WAID;AAAA,MAHCC,gBAGD,QAHCA,gBAGD;AAAA,MAFCC,WAED,QAFCA,WAED;AAAA,MADCC,aACD,QADCA,aACD;AACCN,EAAAA,CAAC,CAACO,cAAF;AACAJ,EAAAA,WAAW,CAAC,IAAD,CAAX;AAEA,MAAMK,YAAY,GAAGV,mBAAmB,CAAC;AACrCW,IAAAA,MAAM,EAAER,WAD6B;AAErCS,IAAAA,yBAAyB,EAAE;AACvBC,MAAAA,IAAI,EAAE,CADiB;AAEvBC,MAAAA,OAAO,EAAE,CAFc;AAGvBC,MAAAA,QAAQ,EAAE,CAHa;AAIvBC,MAAAA,QAAQ,EAAE;AAJa,KAFU;AAQrCC,IAAAA,QAAQ,EAAE;AAR2B,GAAD,CAAxC;;AAWA,MAAIP,YAAY,KAAK,KAArB,EAA4B;AACxBL,IAAAA,WAAW,CAAC,KAAD,CAAX;AACA,WAAOD,gBAAgB,CAACM,YAAD,CAAvB;AACH;;AAEDQ,EAAAA,KAAK,CAACV,aAAD,EAAgB;AACjBW,IAAAA,MAAM,EAAE,MADS;AAEjBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAenB,WAAf;AAFW,GAAhB,CAAL,CAIKoB,IAJL,CAIU,UAACC,CAAD;AAAA,WAAOA,CAAC,CAACC,IAAF,EAAP;AAAA,GAJV,EAKKF,IALL,CAKU,iBAA0B;AAAA,QAAvBG,EAAuB,SAAvBA,EAAuB;AAAA,4BAAnBC,KAAmB;AAAA,QAAnBA,KAAmB,4BAAX,IAAW;AAC5B,QAAI,CAACD,EAAL,EACInB,WAAW,CAAC;AACRqB,MAAAA,SAAS,EAAE,IADH;AAERC,MAAAA,KAAK,EAAE;AACHC,QAAAA,IAAI,EAAE,CADH;AAEHC,QAAAA,QAAQ,EAAE,CAACJ,KAAD,GACJ,oDADI,GAEJA;AAJH;AAFC,KAAD,CAAX,CADJ,KAWIpB,WAAW,CAAC;AACRqB,MAAAA,SAAS,EAAE,IADH;AAERC,MAAAA,KAAK,EAAE;AACHC,QAAAA,IAAI,EAAE,CADH;AAEHC,QAAAA,QAAQ,EAAE;AAFP;AAFC,KAAD,CAAX;AAQJzB,IAAAA,gBAAgB;AACnB,GA1BL,WA2BW,UAACqB,KAAD,EAAW;AACdK,IAAAA,OAAO,CAACL,KAAR,CAAcA,KAAd;AACAtB,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAD,IAAAA,gBAAgB,CAAC,kDAAD,CAAhB;AACH,GA/BL;AAgCH","sourcesContent":["import checkFieldsValidity from \"../../utils/checkFieldsValidity\";\r\nexport default function submitHandler({\r\n    e,\r\n    userDetails,\r\n    showErrorMessage,\r\n    setDisabled,\r\n    showModalHandler,\r\n    modifyAlert,\r\n    fetchEndpoint,\r\n}) {\r\n    e.preventDefault();\r\n    setDisabled(true);\r\n\r\n    const errorMessage = checkFieldsValidity({\r\n        fields: userDetails,\r\n        minimumLengthForEachField: {\r\n            name: 3,\r\n            surname: 3,\r\n            username: 5,\r\n            password: 8,\r\n        },\r\n        hasEmail: true,\r\n    });\r\n\r\n    if (errorMessage !== false) {\r\n        setDisabled(false);\r\n        return showErrorMessage(errorMessage);\r\n    }\r\n\r\n    fetch(fetchEndpoint, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(userDetails),\r\n    })\r\n        .then((r) => r.json())\r\n        .then(({ ok, error = null }) => {\r\n            if (!ok)\r\n                modifyAlert({\r\n                    isVisible: true,\r\n                    props: {\r\n                        type: 0,\r\n                        children: !error\r\n                            ? \"A apărut o eroare internă, vă rugam să ne scuzați.\"\r\n                            : error,\r\n                    },\r\n                });\r\n            else\r\n                modifyAlert({\r\n                    isVisible: true,\r\n                    props: {\r\n                        type: 1,\r\n                        children: \"Operațiunea a fost efectuată cu succes.\",\r\n                    },\r\n                });\r\n\r\n            showModalHandler();\r\n        })\r\n        .catch((error) => {\r\n            console.error(error);\r\n            setDisabled(false);\r\n            showErrorMessage(\"A aparut o eroare interna, va rog sa ne scuzati.\");\r\n        });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}