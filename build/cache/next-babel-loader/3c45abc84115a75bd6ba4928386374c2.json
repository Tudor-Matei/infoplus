{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\plesa\\\\Desktop\\\\Proiecte Web\\\\infoplus\\\\components\\\\utils\\\\SubmitButton.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useContext } from \"react\";\nimport { ShowAlertContext } from \"../../pages/_app\";\nimport { RegisterModalHandler } from \"../Home/Main\";\nimport { LoginModalHandler } from \"../Home/Main\";\nimport checkFieldsValidity from \"../../utils/checkFieldsValidity\";\nexport default function SubmitButton({\n  userDetails,\n  fieldOptions,\n  showErrorMessage,\n  buttonTitle,\n  type\n}) {\n  const {\n    0: isDisabled,\n    1: setDisabled\n  } = useState(false);\n  const showModalHandler = useContext(type === \"register\" ? RegisterModalHandler : LoginModalHandler);\n  const modifyAlert = useContext(ShowAlertContext);\n  return __jsx(React.Fragment, null, __jsx(\"button\", {\n    type: \"submit\",\n    disabled: isDisabled,\n    onClick: e => submitHandler({\n      e,\n      userDetails,\n      fieldOptions,\n      showErrorMessage,\n      setDisabled,\n      modalHandler: showModalHandler,\n      modifyAlert,\n      fetchEndpoint: `api/${type}`\n    }),\n    className: \"jsx-2585271453\" + \" \" + \"button--primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }\n  }, buttonTitle), __jsx(_JSXStyle, {\n    id: \"2585271453\",\n    __self: this\n  }, \".button--primary.jsx-2585271453{background-color:var(--accent-secondary);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGxlc2FcXERlc2t0b3BcXFByb2llY3RlIFdlYlxcaW5mb3BsdXNcXGNvbXBvbmVudHNcXHV0aWxzXFxTdWJtaXRCdXR0b24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUN3QixBQUc4RCx5Q0FDN0MiLCJmaWxlIjoiQzpcXFVzZXJzXFxwbGVzYVxcRGVza3RvcFxcUHJvaWVjdGUgV2ViXFxpbmZvcGx1c1xcY29tcG9uZW50c1xcdXRpbHNcXFN1Ym1pdEJ1dHRvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IFNob3dBbGVydENvbnRleHQgfSBmcm9tIFwiLi4vLi4vcGFnZXMvX2FwcFwiO1xyXG5pbXBvcnQgeyBSZWdpc3Rlck1vZGFsSGFuZGxlciB9IGZyb20gXCIuLi9Ib21lL01haW5cIjtcclxuaW1wb3J0IHsgTG9naW5Nb2RhbEhhbmRsZXIgfSBmcm9tIFwiLi4vSG9tZS9NYWluXCI7XHJcbmltcG9ydCBjaGVja0ZpZWxkc1ZhbGlkaXR5IGZyb20gXCIuLi8uLi91dGlscy9jaGVja0ZpZWxkc1ZhbGlkaXR5XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdWJtaXRCdXR0b24oe1xyXG4gICAgdXNlckRldGFpbHMsXHJcbiAgICBmaWVsZE9wdGlvbnMsXHJcbiAgICBzaG93RXJyb3JNZXNzYWdlLFxyXG4gICAgYnV0dG9uVGl0bGUsXHJcbiAgICB0eXBlLFxyXG59KSB7XHJcbiAgICBjb25zdCBbaXNEaXNhYmxlZCwgc2V0RGlzYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAgIGNvbnN0IHNob3dNb2RhbEhhbmRsZXIgPSB1c2VDb250ZXh0KFxyXG4gICAgICAgIHR5cGUgPT09IFwicmVnaXN0ZXJcIiA/IFJlZ2lzdGVyTW9kYWxIYW5kbGVyIDogTG9naW5Nb2RhbEhhbmRsZXJcclxuICAgICk7XHJcbiAgICBjb25zdCBtb2RpZnlBbGVydCA9IHVzZUNvbnRleHQoU2hvd0FsZXJ0Q29udGV4dCk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8PlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0Rpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0SGFuZGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJEZXRhaWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFcnJvck1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldERpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbEhhbmRsZXI6IHNob3dNb2RhbEhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmeUFsZXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaEVuZHBvaW50OiBgYXBpLyR7dHlwZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidXR0b24tLXByaW1hcnlcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7YnV0dG9uVGl0bGV9XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgICAgICAuYnV0dG9uLS1wcmltYXJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQtc2Vjb25kYXJ5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgIDwvPlxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0SGFuZGxlcih7XHJcbiAgICBlLFxyXG4gICAgdXNlckRldGFpbHMsXHJcbiAgICBmaWVsZE9wdGlvbnMsXHJcbiAgICBzaG93RXJyb3JNZXNzYWdlLFxyXG4gICAgc2V0RGlzYWJsZWQsXHJcbiAgICBtb2RhbEhhbmRsZXIsXHJcbiAgICBtb2RpZnlBbGVydCxcclxuICAgIGZldGNoRW5kcG9pbnQsXHJcbn0pIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNldERpc2FibGVkKHRydWUpO1xyXG5cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNoZWNrRmllbGRzVmFsaWRpdHkoe1xyXG4gICAgICAgIGZpZWxkczogdXNlckRldGFpbHMsXHJcbiAgICAgICAgLi4uZmllbGRPcHRpb25zLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9yTWVzc2FnZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICBzZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuIHNob3dFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBmZXRjaChmZXRjaEVuZHBvaW50LCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyRGV0YWlscyksXHJcbiAgICB9KVxyXG4gICAgICAgIC50aGVuKChyKSA9PiByLmpzb24oKSlcclxuICAgICAgICAudGhlbigoeyBvaywgZXJyb3IgPSBudWxsIH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFvaylcclxuICAgICAgICAgICAgICAgIG1vZGlmeUFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46ICFlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIkEgYXDEg3J1dCBvIGVyb2FyZSBpbnRlcm7EgywgdsSDIHJ1Z2FtIHPEgyBuZSBzY3V6YcibaS5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBlcnJvcixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG1vZGlmeUFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiT3BlcmHIm2l1bmVhIGEgZm9zdCBlZmVjdHVhdMSDIGN1IHN1Y2Nlcy5cIixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIG1vZGFsSGFuZGxlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlKFwiQSBhcGFydXQgbyBlcm9hcmUgaW50ZXJuYSwgdmEgcm9nIHNhIG5lIHNjdXphdGkuXCIpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\plesa\\\\\\\\Desktop\\\\\\\\Proiecte Web\\\\\\\\infoplus\\\\\\\\components\\\\\\\\utils\\\\\\\\SubmitButton.js */\"));\n}\n\nfunction submitHandler({\n  e,\n  userDetails,\n  fieldOptions,\n  showErrorMessage,\n  setDisabled,\n  modalHandler,\n  modifyAlert,\n  fetchEndpoint\n}) {\n  e.preventDefault();\n  setDisabled(true);\n  const errorMessage = checkFieldsValidity(_objectSpread({\n    fields: userDetails\n  }, fieldOptions));\n\n  if (errorMessage !== false) {\n    setDisabled(false);\n    return showErrorMessage(errorMessage);\n  }\n\n  fetch(fetchEndpoint, {\n    method: \"POST\",\n    body: JSON.stringify(userDetails)\n  }).then(r => r.json()).then(({\n    ok,\n    error = null\n  }) => {\n    if (!ok) modifyAlert({\n      isVisible: true,\n      props: {\n        type: 0,\n        children: !error ? \"A apărut o eroare internă, vă rugam să ne scuzați.\" : error\n      }\n    });else modifyAlert({\n      isVisible: true,\n      props: {\n        type: 1,\n        children: \"Operațiunea a fost efectuată cu succes.\"\n      }\n    }); //            modalHandler();\n  }).catch(error => {\n    console.error(error);\n    setDisabled(false);\n    showErrorMessage(\"A aparut o eroare interna, va rog sa ne scuzati.\");\n  });\n}","map":{"version":3,"sources":["C:/Users/plesa/Desktop/Proiecte Web/infoplus/components/utils/SubmitButton.js"],"names":["useState","useContext","ShowAlertContext","RegisterModalHandler","LoginModalHandler","checkFieldsValidity","SubmitButton","userDetails","fieldOptions","showErrorMessage","buttonTitle","type","isDisabled","setDisabled","showModalHandler","modifyAlert","e","submitHandler","modalHandler","fetchEndpoint","preventDefault","errorMessage","fields","fetch","method","body","JSON","stringify","then","r","json","ok","error","isVisible","props","children","catch","console"],"mappings":"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","sourcesContent":["import { useState, useContext } from \"react\";\r\nimport { ShowAlertContext } from \"../../pages/_app\";\r\nimport { RegisterModalHandler } from \"../Home/Main\";\r\nimport { LoginModalHandler } from \"../Home/Main\";\r\nimport checkFieldsValidity from \"../../utils/checkFieldsValidity\";\r\n\r\nexport default function SubmitButton({\r\n    userDetails,\r\n    fieldOptions,\r\n    showErrorMessage,\r\n    buttonTitle,\r\n    type,\r\n}) {\r\n    const [isDisabled, setDisabled] = useState(false);\r\n\r\n    const showModalHandler = useContext(\r\n        type === \"register\" ? RegisterModalHandler : LoginModalHandler\r\n    );\r\n    const modifyAlert = useContext(ShowAlertContext);\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                type=\"submit\"\r\n                disabled={isDisabled}\r\n                onClick={(e) =>\r\n                    submitHandler({\r\n                        e,\r\n                        userDetails,\r\n                        fieldOptions,\r\n                        showErrorMessage,\r\n                        setDisabled,\r\n                        modalHandler: showModalHandler,\r\n                        modifyAlert,\r\n                        fetchEndpoint: `api/${type}`,\r\n                    })\r\n                }\r\n                className=\"button--primary\"\r\n            >\r\n                {buttonTitle}\r\n            </button>\r\n            <style jsx>{`\r\n                .button--primary {\r\n                    background-color: var(--accent-secondary);\r\n                }\r\n            `}</style>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction submitHandler({\r\n    e,\r\n    userDetails,\r\n    fieldOptions,\r\n    showErrorMessage,\r\n    setDisabled,\r\n    modalHandler,\r\n    modifyAlert,\r\n    fetchEndpoint,\r\n}) {\r\n    e.preventDefault();\r\n    setDisabled(true);\r\n\r\n    const errorMessage = checkFieldsValidity({\r\n        fields: userDetails,\r\n        ...fieldOptions,\r\n    });\r\n\r\n    if (errorMessage !== false) {\r\n        setDisabled(false);\r\n        return showErrorMessage(errorMessage);\r\n    }\r\n\r\n    fetch(fetchEndpoint, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(userDetails),\r\n    })\r\n        .then((r) => r.json())\r\n        .then(({ ok, error = null }) => {\r\n            if (!ok)\r\n                modifyAlert({\r\n                    isVisible: true,\r\n                    props: {\r\n                        type: 0,\r\n                        children: !error\r\n                            ? \"A apărut o eroare internă, vă rugam să ne scuzați.\"\r\n                            : error,\r\n                    },\r\n                });\r\n            else\r\n                modifyAlert({\r\n                    isVisible: true,\r\n                    props: {\r\n                        type: 1,\r\n                        children: \"Operațiunea a fost efectuată cu succes.\",\r\n                    },\r\n                });\r\n\r\n            //            modalHandler();\r\n        })\r\n        .catch((error) => {\r\n            console.error(error);\r\n            setDisabled(false);\r\n            showErrorMessage(\"A aparut o eroare interna, va rog sa ne scuzati.\");\r\n        });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}